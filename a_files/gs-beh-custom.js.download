(function( $ ) {
    jQuery.noConflict();

    $(document).ready(function () {   
        
        var reloadInterval = setInterval(function() {
            
            if (document.querySelector('.fetching-data')) {
              location.reload();
            }
          }, 1000);
          
          setTimeout(function() {
            clearInterval(reloadInterval);
          }, 25000);
        
        if ( window.isEditMode ) {
            // For elementor
            elementorFrontend.hooks.addAction( 'frontend/element_ready/widget', function( $scope ) {
                var slider_wrap = $scope.find('.beh_slider');

                if ( slider_wrap.length ) {
                    slider_wrap.owlCarousel({
                        autoplay: true,
                        autoplayHoverPause: true,
                        loop: true,
                        margin: 10,
                        autoplaySpeed: 800,
                        autoplayTimeout: 2500,
                        navSpeed: 1000,
                        dots: true,
                        responsiveClass: true,
                        lazyLoad: true,
                        responsive: {
                            0: {
                                items: 1,
                                nav: false
                            },
                            533: {
                                items: 2,
                                nav: false
                            },
                            768: {
                                items: 2,
                                nav: false
                            },
                            1000: {
                                items: 3,
                                nav: true
                            }
                        }
                    });
                }
            });
        } else {
            $(window).load(function () {
                $('.beh_slider').owlCarousel({
                    autoplay: true,
                    autoplayHoverPause: true,
                    loop: true,
                    margin: 10,
                    autoplaySpeed: 800,
                    autoplayTimeout: 2500,
                    navSpeed: 1000,
                    dots: true,
                    responsiveClass: true,
                    lazyLoad: true,
                    responsive: {
                        0: {
                            items: 1,
                            nav: false
                        },
                        533: {
                            items: 2,
                            nav: false
                        },
                        768: {
                            items: 2,
                            nav: false
                        },
                        1000: {
                            items: 3,
                            nav: true
                        }
                    }
                });
        
                $('.beh-widget-area').owlCarousel({
                    loop: true,
                    autoplay: true,
                    items: 1,
                    nav: true,
                    dots: false,
                    autoplayHoverPause: true,
                    animateOut: 'slideOutUp',
                    animateIn: 'slideInUp'
                });
        
        
                // init Isotope
                var grid = $('.grid').isotope({
                    itemSelector: '.beh-projects',
                    layoutMode: 'fitRows'
                });
        
                // bind filter button click
                $('.filters-button-group').on('click', 'button', function () {
                    var filterValue = $(this).attr('data-filter');
                    // use filterFn if matches value
                    filterValue = filterValue;
                    grid.isotope({filter: filterValue});
                });
                // change is-checked class on buttons
                $('.button-group').each(function (i, buttonGroup) {
                    var $buttonGroup = $(buttonGroup);
                    $buttonGroup.on('click', 'button', function () {
                        $buttonGroup.find('.is-checked').removeClass('is-checked');
                        jQuery(this).addClass('is-checked');
                    });
                });
            });
        }

        $('.beh-projects-pop').magnificPopup({
            type: 'inline',
            midClick: true,
            gallery: {
                enabled: true
            },
            delegate: 'a.gs_beh_pop',
            removalDelay: 500, //delay removal by X to allow out-animation
            callbacks: {
                beforeOpen: function () {
                    var extraClass = ['mfp-gsbehance'];

                    extraClass.push( this.st.el.attr('data-effect') ? this.st.el.attr('data-effect') : 'mfp-fade' );

                    extraClass.push( this.st.el.attr('data-theme') ? this.st.el.attr('data-theme') : 'gs-behance-popup--default' );

                    this.st.mainClass = this.st.mainClass + ' ' + extraClass.join(' ');

                    // this.st.mainClass = this.st.el.attr('data-effect');
                }
            },
            closeOnContentClick: true,
        });

        
        $('.gs_beh_area .button-group .button').each( function( e ){

            var data = $(this).attr('data-filter');            
            var length = $( '.gs_beh_area .grid' ).find(data).length;

            if( !length ) {
                $(this).hide();
            }

            $('.gs_beh_area .filter').css( 'visibility', 'visible' );
            
        } );
        
    });
})(jQuery);